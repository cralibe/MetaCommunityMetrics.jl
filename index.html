<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>MetaCommunityMetrics.jl · MetaCommunityMetrics Documentation</title><meta name="title" content="MetaCommunityMetrics.jl · MetaCommunityMetrics Documentation"/><meta property="og:title" content="MetaCommunityMetrics.jl · MetaCommunityMetrics Documentation"/><meta property="twitter:title" content="MetaCommunityMetrics.jl · MetaCommunityMetrics Documentation"/><meta name="description" content="Documentation for MetaCommunityMetrics Documentation."/><meta property="og:description" content="Documentation for MetaCommunityMetrics Documentation."/><meta property="twitter:description" content="Documentation for MetaCommunityMetrics Documentation."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>MetaCommunityMetrics Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>MetaCommunityMetrics.jl</a><ul class="internal"><li><a class="tocitem" href="#Getting-Started"><span>Getting Started</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>MetaCommunityMetrics.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>MetaCommunityMetrics.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/cralibe/MetaCommunityMetrics.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/cralibe/MetaCommunityMetrics.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="MetaCommunityMetrics.jl"><a class="docs-heading-anchor" href="#MetaCommunityMetrics.jl">MetaCommunityMetrics.jl</a><a id="MetaCommunityMetrics.jl-1"></a><a class="docs-heading-anchor-permalink" href="#MetaCommunityMetrics.jl" title="Permalink"></a></h1><p><em>A collection of tools and utilities for analyzing meta-communities in Julia.</em></p><p>Welcome to the documentation for MetaCommunityMetrics. Here you can find guides and reference material on how to use the functions.</p><h2 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h2><p>###Installation</p><p>To install MetaCommunityMetrics, use the following command:</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;MetaCommunityMetrics&quot;)
using MetaCommunityMetrics</code></pre><p>##Functions</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MetaCommunityMetrics.beta_diversity-Tuple{Matrix{T} where T}" href="#MetaCommunityMetrics.beta_diversity-Tuple{Matrix{T} where T}"><code>MetaCommunityMetrics.beta_diversity</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">beta_diversity(mat::Matrix; quant::Bool) -&gt; DataFrame</code></pre><p>Calculate beta diversity for a given biodiversity data. This function supports both binary (presence/absence) and quantitative data. For binary data, the function calculates Podani family, Jaccard-based indices. For quantitative data, the function calculates Podani family, Ruzicka-based indices. The function returns a DataFrame containing the calculated beta diversity indices.  Empty patches have to be removed before calculation. Please refer to Example.jl for more details.</p><p><strong>Arguments</strong></p><ul><li><code>mat::Matrix</code>: A matrix where each row represents a sample and each column represents a species. The elements of the matrix should represent the presence/absence or abundance of species.</li><li><code>quant::Bool</code>: A boolean flag that indicates whether the data is quantitative. Default is <code>false</code>, which means the data is treated as binary.</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: A DataFrame with the following columns:</li><li><code>BDtotal</code>: Total beta diversity, which captures the overall dissimilarity between local communities.</li><li><code>Repl</code>: Replacement component of diversity, which reflects how many species are different in one site compared to another, ignoring the species that are mere additions or subtractions.</li><li><code>RichDif</code>: Richness difference component of diversity, which captures the disparity in biodiversity in terms of the count of species present, without taking into account the specific identities or distributions of those species.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cralibe/MetaCommunityMetrics.jl/blob/fce6aabd1f48d284fe1729841040a5741a0baf35/src/BetaDiversity.jl#L3-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MetaCommunityMetrics.mean_spatial_beta_div-Tuple{AbstractVector{T} where T, AbstractVector{T} where T, Union{String, AbstractVector{T} where T}, Union{String, AbstractVector{T} where T}}" href="#MetaCommunityMetrics.mean_spatial_beta_div-Tuple{AbstractVector{T} where T, AbstractVector{T} where T, Union{String, AbstractVector{T} where T}, Union{String, AbstractVector{T} where T}}"><code>MetaCommunityMetrics.mean_spatial_beta_div</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mean_spatial_beta_div(abundance::AbstractVector, time::AbstractVector, patch::Union{AbstractVector, String}, species::Union{AbstractVector, String}; quant::Bool) -&gt; DataFrame</code></pre><p>Calculate the mean spatial beta diversity components of a metacommunity over time based on species abundances or presence-absences.</p><p><strong>Arguments</strong></p><ul><li><code>abundance::Vector</code>: A vector containing abundance data for each species across different samples.</li><li><code>time::Vector</code>: A vector indicating the time each sample was taken.</li><li><code>patch::Vector</code>: A vector indicating the spatial location (patch) of each sample.</li><li><code>species::Vector</code>: A vector indicating the species associated with each abundance entry.</li><li><code>quant::Bool</code>: Optional boolean flag to indicate whether the data should be treated as quantitative (default is <code>false</code>, treating data as binary presence/absence).</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: A DataFrame containing the mean values of total beta diversity, replacement, and richness difference components across all time points. Columns are <code>mean_spatial_BDtotal</code>, <code>mean_spatial_Repl</code>, and <code>mean_spatial_RichDif</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cralibe/MetaCommunityMetrics.jl/blob/fce6aabd1f48d284fe1729841040a5741a0baf35/src/BetaDiversity.jl#L112-L126">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MetaCommunityMetrics.mean_temporal_beta_div-Tuple{AbstractVector{T} where T, AbstractVector{T} where T, Union{String, AbstractVector{T} where T}, Union{String, AbstractVector{T} where T}}" href="#MetaCommunityMetrics.mean_temporal_beta_div-Tuple{AbstractVector{T} where T, AbstractVector{T} where T, Union{String, AbstractVector{T} where T}, Union{String, AbstractVector{T} where T}}"><code>MetaCommunityMetrics.mean_temporal_beta_div</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mean_temporal_beta_div(abundance::AbstractVector, time::AbstractVector, patch::Union{AbstractVector, String}, species::Union{AbstractVector, String};quant::Bool) -&gt; DataFrame</code></pre><p>Calculate the mean temporal beta diversity components acorss all patches based on species abundances or presence-absences.</p><p><strong>Arguments</strong></p><ul><li><code>abundance::Vector</code>: A vector containing abundance data for each species across different samples.</li><li><code>time::Vector</code>: A vector indicating the time each sample was taken.</li><li><code>patch::Vector</code>: A vector indicating the spatial location (patch) of each sample.</li><li><code>species::Vector</code>: A vector indicating the species associated with each abundance entry.</li><li><code>quant::Bool</code>: Optional boolean flag to indicate whether the data should be treated as quantitative (default is <code>false</code>, treating data as binary presence/absence).</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: A DataFrame containing the mean values of total beta diversity, replacement, and richness difference components across all pactches. Columns are <code>mean_temporal_BDtotal</code>, <code>mean_temporal_Repl</code>, and <code>mean_temporal_RichDif</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cralibe/MetaCommunityMetrics.jl/blob/fce6aabd1f48d284fe1729841040a5741a0baf35/src/BetaDiversity.jl#L185-L199">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MetaCommunityMetrics.create_clusters-Tuple{Vector{Int64}, Vector{Float64}, Vector{Float64}, Vector{Int64}}" href="#MetaCommunityMetrics.create_clusters-Tuple{Vector{Int64}, Vector{Float64}, Vector{Float64}, Vector{Int64}}"><code>MetaCommunityMetrics.create_clusters</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">create_clusters(time::Vector{Int}, latitude::Vector{Float64}, longitude::Vector{Float64}, patch::Vector{Int}) -&gt; Dict{Int, DataFrame}</code></pre><p>Create clusters for each unique time step in a dataset. Only presnece-absence data can be used.</p><p><strong>Arguments</strong></p><ul><li><code>time::Vector</code>: A vector indicating the time each sample was taken.</li><li><code>latitude::Vector</code>: A vector indicating the latitude of each sample.</li><li><code>longitude::Vector</code>: A vector indicating the longitude of each sample.</li><li><code>patch::Vector</code>: A vector indicating the spatial location (patch) of each sample.</li></ul><p><strong>Returns</strong></p><ul><li><code>Dict{Int, DataFrame}</code>: A dictionary where each key is a unique time from the dataset and each value is a DataFrame for that time with an added <code>Group</code> column indicating the assigned cluster.</li></ul><p><strong>Details</strong></p><p>This function performs hierarchical clustering on geographical coordinates for each unique time step. It aims to balance the clusters based on the number of sites and species richness, ensuring that no group has less than five sites and that there are at least two groups. If conditions for clustering balance are not met (like groups having less than five sites or only one group), it iteratively adjusts the clusters by reassigning sites to improve group balance.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using CSV, DataFrames
using DataFramesMeta
using Pipe: @pipe

sample_df = @pipe CSV.read(&quot;data/rodent_abundance_data.csv&quot;, DataFrame; header=true) |&gt;#read in the sample data
            select(_, Not(:Column1))|&gt; #select the columns 
            stack(_, Not(:Sampling_date_order, :Year, :Month, :Day, :plot), variable_name = :species, value_name = :abundance)

preped_data= @pipe sample_df |&gt;         
@transform(_, :presence = ifelse.(:abundance .&gt;= 1, 1, 0)) |&gt;
groupby(_, [:Sampling_date_order, :species]) |&gt; 
combine(_,:presence=&gt;sum=&gt;:total_presence) |&gt;
filter(row -&gt; row[:total_presence] !&lt;= 1, _) |&gt; #remove singletons (species occurring at one site only)
leftjoin(_,sample_df, on = [:Sampling_date_order, :species]) |&gt; #join the data back to the original data


# Generate random latitude and longitude values
n = nrow(sample_df)
latitude = rand(35.0:0.01:36.0, n) # Adjust range as needed
longitude = rand(-120.0:0.01:-119.0, n) # Adjust range as needed

# Add the coordinates to the DataFrame
sample_df[:, :latitude] = latitude
sample_df[:, :longitude] = longitude

# Create groups for each time step
grouped_data = create_clusters(sample_df.Sampling_date_order, sample_df.latitude, sample_df.longitude, sample_df.plot)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cralibe/MetaCommunityMetrics.jl/blob/fce6aabd1f48d284fe1729841040a5741a0baf35/src/DNCI.jl#L6-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MetaCommunityMetrics.plot_clusters-Tuple{DataFrames.DataFrame}" href="#MetaCommunityMetrics.plot_clusters-Tuple{DataFrames.DataFrame}"><code>MetaCommunityMetrics.plot_clusters</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot_clusters(grouped_data::DataFrame)</code></pre><p>This function plots the clustering result from the function create_clusters() on a scatter plot according to geographic coordinates. Each point represents a location, and points are colored based on their group/cluster ID.</p><p><strong>Arguments</strong></p><ul><li><code>grouped_data::DataFrame</code>: A DataFrame containing the columns <code>Latitude</code>, <code>Longitude</code>, and <code>Group</code>. <ul><li><code>Latitude</code>: A column of latitude coordinates.</li><li><code>Longitude</code>: A column of longitude coordinates.</li><li><code>Group</code>: A column indicating the cluster ID for each point.</li></ul></li></ul><p><strong>Returns</strong></p><p>Returns</p><ul><li>This function displays a scatter plot of the clusters.</li></ul><p><strong>Details</strong></p><ul><li>The function extracts the <code>Latitude</code>, <code>Longitude</code>, and <code>Group</code> columns from the provided DataFrame.</li><li>Unique cluster IDs are assigned numeric identifiers.</li><li>A color palette is generated using distinguishable colors to differentiate the clusters.</li><li>The scatter plot is created with points colored by their cluster ID.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">using DataFrames
# Create a sample DataFrame
data = DataFrame(Latitude = [34.05, 36.16, 40.71, 34.05],
                 Longitude = [-118.24, -115.15, -74.01, -118.24],
                 Group = [&quot;A&quot;, &quot;B&quot;, &quot;A&quot;, &quot;B&quot;])

# Plot clusters
plot_clusters(data)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cralibe/MetaCommunityMetrics.jl/blob/fce6aabd1f48d284fe1729841040a5741a0baf35/src/DNCI.jl#L93-L126">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MetaCommunityMetrics.DNCI_multigroup" href="#MetaCommunityMetrics.DNCI_multigroup"><code>MetaCommunityMetrics.DNCI_multigroup</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">DNCI_multigroup(comm::Matrix, groups::Vector, Nperm::Int=1000, count::Bool=true)</code></pre><p>Calculates the dispersal-niche continuum index (DNCI) for multiple groups, a metric proposed by Vilmi(2021) (doi: 10.1111/ecog.05356).</p><p><strong>Arguments</strong></p><ul><li><code>comm::Matrix</code>: A presence-absence data matrix where rows represent observations (e.g., sites or samples) and columns represent species.</li><li><code>groups::Vector</code>: A vector indicating the group membership for each row in the <code>comm</code> matrix.</li><li><code>Nperm::Int=1000</code>: The number of permutations for significance testing. Default is 1000.</li><li><code>count::Bool=true</code>: A flag indicating whether the numeber of permutations is printed. Default is <code>false</code>.</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: A DataFrame containing the DNCI results for each pair of groups.</li></ul><p><strong>Examples</strong></p><p>```julia</p><p><strong>Example usage of DNCI_multigroup</strong></p><p>comm = [1 0 0 1 0;         1 1 0 0 0;         0 1 1 0 0;         0 0 1 1 1;         1 0 0 0 1;         0 1 1 0 1]</p><p>groups = [&quot;A&quot;, &quot;A&quot;, &quot;B&quot;, &quot;B&quot;, &quot;C&quot;, &quot;C&quot;] Nperm = 1000 count = true</p><p>result = DNCI_multigroup(comm, groups, Nperm, count) println(result)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cralibe/MetaCommunityMetrics.jl/blob/fce6aabd1f48d284fe1729841040a5741a0baf35/src/DNCI.jl#L150-L182">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Wednesday 31 July 2024 20:30">Wednesday 31 July 2024</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
